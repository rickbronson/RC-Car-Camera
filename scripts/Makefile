##
##  Apache Makefile, automatically generated by Configure script.
##  Hand-edited changes will be lost if the Configure script is re-run.
##  Sources: - ../Makefile.config (via Configuration.apaci)
##           - ./Makefile.tmpl
##
CROSS_COMPILE = ../Dafang-Hacks/Main/toolchain/bin/mips-linux-uclibc-gnu-
AS		= $(CROSS_COMPILE)as
LD		= $(CROSS_COMPILE)ld
CC		= $(CROSS_COMPILE)gcc
CPP		= $(CC) -E
AR		= $(CROSS_COMPILE)ar
NM		= $(CROSS_COMPILE)nm
STRIP		= $(CROSS_COMPILE)strip
OBJCOPY		= $(CROSS_COMPILE)objcopy
OBJDUMP		= $(CROSS_COMPILE)objdump
MAKEFILES	= $(TOPDIR)/.config
GENKSYMS	= $(TOOLDIR)genksyms
DEPMOD		= $(TOOLDIR)depmod
MODFLAGS	= -DMODULE
CFLAGS_KERNEL	=
PERL		= perl
LLIBS      =-lc -lgcc -lpthread
LLIBSX     =-lc -lgcc -lpthread -lXext 
##
##  (End of automatically generated section)
##

PROG = devmem
SRCS = devmem.c

OBJS =	$(SRCS:%.c=%.o)

CFLAGS = -g -I. -O2 -Wall -march=mips32r2
CFLAGS += -muclibc
LDFLAGS = -muclibc

$(PROG):	$(PROG).c Makefile .depend
	$(CC) $(CFLAGS) -Wa,-alh,-L -c $@.c -o $@.o > $@.lis
	$(CC) -o $(PROG) $(OBJS) $(LDFLAGS) $(LLIBS)

test-tx2:	test-tx2.c Makefile .depend
	$(CC) $(CFLAGS) -Wa,-alh,-L -c $@.c -o $@.o > $@.lis
	$(CC) -o $@ $@.o $(LDFLAGS) $(LLIBS)
	echo scp $(PWD)/$@ root@192.168.2.6:/usr/bin

getjoystick:	getjoystick.c net.h Makefile .depend
	$(CC) $(CFLAGS) -Wa,-alh,-L -c $@.c -o $@.o > $@.lis
	$(CC) -o $@ $@.o $(LDFLAGS) $(LLIBS)
	echo scp $(PWD)/$@ root@192.168.2.6:/usr/bin

clean:
	rm -f $(OBJS) core *.o *.lis .depend

depend .depend dep:
	$(CC) $(CFLAGS) -M $(SRCS) > $@

dummy:
# include a dependency file if one exists
ifeq (.depend,$(wildcard .depend))
include .depend
endif
